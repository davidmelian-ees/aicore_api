================================================================================
                    CONVENCIÓN DE NOMENCLATURA PARA PLIEGOS
                        Sistema de Validación Estructural
================================================================================

FORMATO ESTÁNDAR:
pliego_{TIPO}_{MODALIDAD}_{CATEGORIA}

================================================================================
                              COMPONENTES
================================================================================

1. TIPO (4 opciones):
   - obra_civil_obert         → Obra Civil Obert (Procedimiento Abierto)
   - obra_civil_simplificat   → Obra Civil Simplificat (Procedimiento Simplificado)
   - obra_edificacio_obert    → Obra Edificació Obert (Edificación Abierto)
   - obra_edificacio_simplificat → Obra Edificació Simplificat (Edificación Simplificado)

2. MODALIDAD (2 opciones - SOLO para documentos GENERADOS y VALIDACION):
   - con_lotes          → Pliego generado que incluye lotes
   - sin_lotes          → Pliego generado sin lotes
   
   NOTA: Las PLANTILLAS y PLANTILLAS_TAGS no se separan por modalidad,
   ya que son la base común para generar tanto pliegos con como sin lotes.

3. CATEGORIA (4 opciones):
   - PLANTILLA          → Documento base limpio
   - PLANTILLA_TAGS     → Plantilla con marcadores SAP
   - GENERADO           → Pliego final con datos insertados
   - VALIDACION         → Documento para validar

================================================================================
                              EJEMPLOS COMPLETOS
================================================================================

OBRA CIVIL OBERT:
✅ pliego_obra_civil_obert_PLANTILLA
✅ pliego_obra_civil_obert_PLANTILLA_TAGS
✅ pliego_obra_civil_obert_sin_lotes_GENERADO
✅ pliego_obra_civil_obert_sin_lotes_VALIDACION
✅ pliego_obra_civil_obert_con_lotes_GENERADO
✅ pliego_obra_civil_obert_con_lotes_VALIDACION

OBRA CIVIL SIMPLIFICAT:
✅ pliego_obra_civil_simplificat_PLANTILLA
✅ pliego_obra_civil_simplificat_PLANTILLA_TAGS
✅ pliego_obra_civil_simplificat_sin_lotes_GENERADO
✅ pliego_obra_civil_simplificat_sin_lotes_VALIDACION
✅ pliego_obra_civil_simplificat_con_lotes_GENERADO
✅ pliego_obra_civil_simplificat_con_lotes_VALIDACION

OBRA EDIFICACIÓ OBERT:
✅ pliego_obra_edificacio_obert_PLANTILLA
✅ pliego_obra_edificacio_obert_PLANTILLA_TAGS
✅ pliego_obra_edificacio_obert_sin_lotes_GENERADO
✅ pliego_obra_edificacio_obert_sin_lotes_VALIDACION
✅ pliego_obra_edificacio_obert_con_lotes_GENERADO
✅ pliego_obra_edificacio_obert_con_lotes_VALIDACION

OBRA EDIFICACIÓ SIMPLIFICAT:
✅ pliego_obra_edificacio_simplificat_PLANTILLA
✅ pliego_obra_edificacio_simplificat_PLANTILLA_TAGS
✅ pliego_obra_edificacio_simplificat_sin_lotes_GENERADO
✅ pliego_obra_edificacio_simplificat_sin_lotes_VALIDACION
✅ pliego_obra_edificacio_simplificat_con_lotes_GENERADO
✅ pliego_obra_edificacio_simplificat_con_lotes_VALIDACION

TOTAL: 24 combinaciones posibles
- 4 tipos × 2 categorías plantillas = 8 plantillas base
- 4 tipos × 2 modalidades × 2 categorías finales = 16 documentos generados/validación

================================================================================
                        CONTEXTOS RAG SUGERIDOS
================================================================================

PLANTILLA → PLANTILLAS_BASE
- Documentos base limpios sin datos específicos
- Estructura pura de cada tipo de pliego
- Referencia para validaciones estructurales

PLANTILLA_TAGS → PLANTILLAS_TAGS  
- Plantillas con marcadores SAP {{VARIABLE}}
- Mapeo de campos variables por tipo
- Referencia para detección de tags

GENERADO → PLIEGOS_REFERENCIA
- Pliegos finales correctos con datos SAP
- Ejemplos de buenas prácticas
- Base para comparaciones de calidad

VALIDACION → DOCUMENTOS_VALIDACION
- Documentos a validar (pueden tener errores)
- Casos de prueba y validación
- Documentos en proceso de revisión

================================================================================
                            FLUJO DE TRABAJO
================================================================================

1. CREACIÓN DE PLANTILLAS:
   Archivo: pliego_obra_civil_obert_PLANTILLA.docx
   Contexto: PLANTILLAS_BASE
   Propósito: Definir estructura base (sirve para con y sin lotes)

2. AÑADIR TAGS SAP:
   Archivo: pliego_obra_civil_obert_PLANTILLA_TAGS.docx  
   Contexto: PLANTILLAS_TAGS
   Propósito: Mapear campos variables (incluye tags para lotes opcionales)

3. GENERAR PLIEGO CON LOTES:
   Archivo: pliego_obra_civil_obert_con_lotes_GENERADO.pdf
   Contexto: PLIEGOS_REFERENCIA
   Propósito: Ejemplo de referencia con lotes incluidos

4. GENERAR PLIEGO SIN LOTES:
   Archivo: pliego_obra_civil_obert_sin_lotes_GENERADO.pdf
   Contexto: PLIEGOS_REFERENCIA
   Propósito: Ejemplo de referencia sin lotes

5. VALIDAR NUEVOS PLIEGOS:
   Archivo: pliego_obra_civil_obert_con_lotes_VALIDACION.pdf
   Contexto: DOCUMENTOS_VALIDACION
   Propósito: Validar pliego con lotes contra plantilla base

================================================================================
                            DETECCIÓN AUTOMÁTICA
================================================================================

POR NOMBRE DE ARCHIVO:
- Si contiene "plantilla_tags" o "tags" → PLANTILLA_TAGS
- Si contiene "plantilla" → PLANTILLA  
- Si contiene "generado" o "referencia" → GENERADO
- Si contiene "validacion" o "validar" → VALIDACION
- Por defecto → VALIDACION

POR CONTENIDO:
- Presencia de tags SAP {{}} → PLANTILLA_TAGS
- Contenido genérico sin datos específicos → PLANTILLA
- Datos específicos (fechas, importes, códigos) → GENERADO o VALIDACION

================================================================================
                            VALIDACIÓN AUTOMÁTICA
================================================================================

PATRÓN REGEX PLANTILLAS:
^pliego_(obra_civil_obert|obra_civil_simplificat|obra_edificacio_obert|obra_edificacio_simplificat)_(PLANTILLA|PLANTILLA_TAGS)

PATRÓN REGEX GENERADOS/VALIDACIÓN:
^pliego_(obra_civil_obert|obra_civil_simplificat|obra_edificacio_obert|obra_edificacio_simplificat)_(con_lotes|sin_lotes)_(GENERADO|VALIDACION)

EJEMPLOS VÁLIDOS:
✅ pliego_obra_civil_obert_PLANTILLA.docx
✅ pliego_obra_civil_obert_PLANTILLA_TAGS.docx
✅ pliego_obra_edificacio_simplificat_sin_lotes_VALIDACION.pdf
✅ pliego_obra_civil_simplificat_con_lotes_GENERADO.pdf

EJEMPLOS INVÁLIDOS:
❌ pliego_obra_civil_obert_con_lotes_PLANTILLA.docx (plantillas no tienen modalidad)
❌ pliego_obra_civil_simplificat_GENERADO.pdf (generados necesitan modalidad)
❌ obra_civil_obert_PLANTILLA.docx (falta prefijo "pliego_")

================================================================================
                            ENDPOINTS RELACIONADOS
================================================================================

GET /api/pliego-validation/nomenclatura
- Obtiene información completa sobre la convención
- Lista todos los ejemplos posibles
- Muestra contextos RAG sugeridos

POST /api/pliego-validation/validar-nombre
- Valida si un nombre sigue la convención
- Sugiere correcciones automáticas
- Recomienda contexto RAG apropiado

GET /api/pliego-validation/tipos-pliego
- Lista tipos y categorías disponibles
- Información sobre apartados obligatorios
- Patrones de detección por tipo

================================================================================
                            BENEFICIOS DEL SISTEMA
================================================================================

1. ORGANIZACIÓN CLARA:
   - Fácil identificación del tipo de documento
   - Clasificación automática por contexto RAG
   - Estructura predecible y escalable

2. AUTOMATIZACIÓN:
   - Detección automática de categoría
   - Sugerencias de nomenclatura correcta
   - Asignación automática de contexto RAG

3. TRAZABILIDAD:
   - Historial claro de tipos de documento
   - Seguimiento de plantillas vs generados
   - Identificación rápida de documentos de referencia

4. ESCALABILIDAD:
   - Fácil adición de nuevos tipos
   - Extensible a nuevas categorías
   - Mantenimiento simplificado

================================================================================
                                NOTAS IMPORTANTES
================================================================================

- Los nombres DEBEN seguir exactamente la convención
- Las categorías van en MAYÚSCULAS
- Los tipos y modalidades van en minúsculas con guiones bajos
- La extensión del archivo (.pdf, .docx, etc.) no afecta la validación
- El sistema sugiere automáticamente el contexto RAG apropiado
- Cada categoría tiene un propósito específico en el flujo de trabajo

================================================================================
                                    FIN
================================================================================
