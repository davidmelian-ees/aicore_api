EXAMPLES OF POORLY FORMED DOCUMENTS - MODEL TRAINING
================================================================

OBJECTIVE: Train the model to recognize specific error patterns
in documents using real examples of poorly formed documents.

TRAINING METHODOLOGY:
1. Upload forms with known errors to the RAG context “FORMS_ERRORS_EXAMPLES.”
2. Document each specific error found.
3. Create automatic detection patterns.
4. Validate improvements in detection.

TYPES OF ERRORS TO DOCUMENT:
===============================

1. UNFILLED VARIABLE FIELDS:
   - Unreplaced SAP tags: {{BASE_BUDGET}}
   - Fields with default values: [INSERT_DATE]
   - Empty variables: {{}} or {{ }}

1.1. SPECIFIC SAP TAGS NOT REPLACED:
   
   DESCRIPTION OF CONTRACTS:
   ❌ WRONG: CONTRACT FOR THE EXECUTION OF THE WORKS OF (Long description of the Award Procedure)
   ✅ CORRECT: CONTRACT FOR THE EXECUTION OF THE CONSTRUCTION PROJECT FOR THE RENOVATION DUE TO OBSOLESCENCE OF THE VIDEO SURVEILLANCE SYSTEM EQUIPMENT ON TRAM IV OF THE L9 METRO LINE IN BARCELONA
   
   FILE CLAUSES:
   ❌ WRONG: CLAUSE: (Clause - File Abbreviated Description)
   ✅ RIGHT: CLAUSE: R0-21223 or CLAUSE: ATL-23261
   
   LOT INFORMATION:
   ❌ WRONG: [ZERM_QUADRE_LOTS-Z_DESCRIP_LOT]
   ✅ CORRECT: Vilafranca del Penedès – La Granada
   ❌ WRONG: [ZERM_QUADRE_LOTS-ZZ_NUM_LOT]
   ✅ CORRECT: 1, 2, 3, 4...
   
   LOGOS AND HEADERS:
   ❌ INCORRECT: (Header: Logos according to company and funding sources - OTHER DOCS)
   ✅ CORRECT: [Corporate logo inserted]
   
   TERMS OF EXECUTION:
   ❌ WRONG: (Tender execution terms) (Time)(Day)(Week)(Month)(Year)
           Lot Terms (months) Conditions
           [ZERM_QDC_CLO_LIC-ZZ_NUM_LOT]
           [ZERM_QDC_CLO_LIC-Z_TERM_LOT]
           [ZERM_QDC_CLO_LIC-Z_OBRES_SIM]
           (Justification no lots)
   ✅ CORRECT: 3.- CONTRACT EXECUTION TERMS:
           Lot Terms (months)
           1   5 months
           2   5 months  
           3   10 months
           4   6 months
   
   BUDGET INFORMATION AND GUARANTEES:
   ❌ WRONG: Budget item: (Budget item)
           PROVISIONAL GUARANTEE: (If no provisional guarantee) (If provisional guarantee) (Provisional guarantee percentage)
           DEFINITIVE GUARANTEE: (Definitive guarantee percentage)%
           GUARANTEE PERIOD: (Guarantee terms) months
   ✅ GOOD: Budget item: D/660.0002 – Program 521
           PROVISIONAL GUARANTEE: NO
           DEFINITIVE GUARANTEE: 5% of the award price (VAT not included)
           GUARANTEE PERIOD: TWO YEARS

2. INCOMPLETE REQUIRED FIELDS:
   - Empty clauses: “CLAU:” with no content after it
   - Unfilled sections: PRESSUPOST:” followed by a blank line
   - Unspecified references: “VEURE ANNEX:” with no number/name

3. FORMAT ERRORS:
   - Incorrect dates: 32/13/2025, 2025-12-31
   - Unformatted amounts: 123456 instead of 123,456.78 €
   - Malformed codes: CT123 instead of CT1234567

3. STRUCTURAL ERRORS:
   - Duplicate sections
   - Missing mandatory sections
   - Incorrect numbering (1.1, 1.3, 1.5 - 1.2 and 1.4 are missing)

4. CONTENT ERRORS:
   - Contradictory information
   - Incorrect cross-references
   - Inconsistent data between sections

5. LOT ERRORS:
   - Poorly defined lots
   - Lot budgets do not add up to the total
   - Lot information in specifications “without lots”

6. COMMENTS:
   - Comments from templates
   - Comments made during the creation process

DOCUMENTATION FORMAT FOR EACH SPECIFICATION:
=========================================

FILE: [filename.pdf]
ERROR_TYPE: [error_category]
DESCRIPTION: [detailed_description]
LOCATION: [section/line where it appears]
DETECTION_PATTERN: [regex or pattern for automatic detection]
SUGGESTED_CORRECTION: [how it should be]

DOCUMENTATION EXAMPLES:
-------------------------

EXEMPLE 1 - CAMP DE VARIABLE NO OMPLERT:
ARXIU: CT1234567_plec_civil_works_obert_amb_lots_validation.pdf
TIPUS_D'ERROR: CAMP_DE_VARIABLE_NO_OMPLERT
DESCRIPCIÓ: L'etiqueta SAP {{BASIC_BUDGET}} no s'ha substituït a la secció de pressupost
LLOC: Secció 4.2, aproximadament a la línia 156
PATRÓ_DE_DETECCIÓ: /\{\{[A-Z_]+\}\}/g
CORRECCIÓ_PROPOSADA: Substituïu per un valor numèric en el format £123,456.78

EXEMPLE 2 - CLAUSULA INCOMPLETA:
ARXIU: CT1234567_plec_edificacio_sense_lots_validacion_ERROR_CLAU.pdf
TIPUS_D'ERROR: CAMP_OBLIGATORI_INCOMPLET
DESCRIPCIÓ: Clàusula buida "CLAU:" sense cap contingut especificat
UBICACIÓ: Diverses seccions, "CLAU:" apareix seguida d'una línia en blanc
PATRÓ_DE_DETECCIÓ: /CLAU:\s*$/gm
CORRECCIÓ_PROPOSADA: Completeu-ho amb una clàusula específica, p. ex.: "CLAU: Clàusula penal per retard"

EXEMPLE 3 - PRESUPOST_INCOMPLET:
ARXIU: CT1234567_plec_obra_civil_validacion_ERROR_PRESUPUESTO.pdf
TIPUS_D'ERROR: CAMP_OBLIGATORI_INCOMPLET
DESCRIPCIÓ: Secció "PRESSUPOST:" sense imports detallats
LLOC: Secció de pressupost
PATRÓ_DETECCIÓ: /BUDGET:\s*$/gm
CORRECCIÓ_SUGERIDA: Afegiu el desglossament dels imports i el total

EXEMPLE 4 - DESCRIPCIÓ DE L'ETIQUETA SAP SENSE SUBSTITUCIÓ:
ARXIU: CT1234567_plec_edificacio_validacion_ERROR_DESCRIPCIO.pdf
TIPUS_D'ERROR: SAP_TAG_NOT_REPLACED
DESCRIPCIÓ: L'etiqueta "(Long description of the Award Procedure)" no s'ha substituït
LLOC: Títol del contracte, línia 1
PATRÓ_DE_DETECCIÓ: /\([^)]*Description[^)]*\)/g
CORRECCIÓ_PROPOSADA: Substituïu per la descripció específica del projecte

EXEMPLE 5 - CLAÚSUL D'ARXIU INCOMPLET:
ARXIU: CT1234567_plec_obra_civil_validacion_ERROR_CLAU_EXPEDIENT.pdf
TIPUS_D'ERROR: TAG_SAP_NOT_REPLACED
DESCRIPCIÓ: L'etiqueta "(Clau - Expedient Descripció Abreujada)" no s'ha substituït
UBICACIÓ: Secció CLAU
PATRÓ_DE_DETECCIÓ: /\(Clau - Expedient[^)]*\)/g
CORRECCIÓ_PROPOSADA: Substituïu per un codi específic com ara "R0-21223" o "ATL-23261"

EXEMPLE 6 - ETIQUETES ZERM NO SUBSTITUÏDES:
ARXIU: CT1234567_plec_civil_works_validation_ERROR_ZERM.pdf
TIPUS_D'ERROR: ETIQUETA_SAP_NO_SUBSTITUÏDA
DESCRIPCIÓ: Les etiquetes "[ZERM_QUADRE_LOTS-Z_DESCRIP_LOT]" i "[ZERM_QUADRE_LOTS-ZZ_NUM_LOT]" no s'han substituït
UBICACIÓ: Secció de lots
PATRÓ_DETECCIÓ: /\[ZERM_[A-Z_-]+\]/g
CORRECCIÓ_PROPOSADA: Substituïu per la descripció i el número de lot específics

EXEMPLE 7 - GARANTIES NO ESPECIFICADES:
ARXIU: CT1234567_plec_edificacio_validacion_ERROR_GARANTIES.pdf
TIPUS_D'ERROR: TAG_SAP_NOT_REPLACED
DESCRIPCIÓ: Les etiquetes "(If no provisional guarantee)" i "(Percentatge aval definitiu)" no s'han substituït
LLOC: Secció de garanties
PATRÓ_DETECCIÓ: /\(If no guarantee[^)]*\)/g, /\(Percentage guarantee[^)]*\)/g
CORRECCIÓ_SUGERIDA: Especifiqueu "NO" o un percentatge específic com ara "5%"

INSTRUCTIONS FOR USE:
====================

1. UPLOAD PROBLEMATIC DOCUMENTS:
   - Use RAG context: “DOCUMENT_VALIDATION” (existing context)
   - Include in file name: “_validation_ERROR_[type]”
   - Example: CT1234567_plec_obra_civil_amb_lots_validacion_ERROR_CAMPOS.pdf

2. DOCUMENT EACH ERROR:
   - Create a .txt file for each document with errors
   - Follow the standard documentation format
   - Include screenshots if necessary

3. VALIDATE IMPROVEMENTS:
   - Test the validation endpoint with corrected specifications
   - Verify that it detects the documented errors
   - Adjust prompts according to results

AUTOMATIC DETECTION PATTERNS:
=================================

UNFILLED_VARIABLE_FIELDS:
- Regex: /\{\{[^}]*\}\}/g
- Search: [INSERT_, [COMPLETE_, [FILL_
- Patterns: {{ }}, {{  }}, {{VARIABLE}}

INCOMPLETE_REQUIRED_FIELDS:
- Regex: /CLAU:\s*$/gm (CLAU: followed only by spaces and end of line)
- Regex: /BUDGET:\s*$/gm (BUDGET: no content)
- Regex: /SEE ANNEX:\s*$/gm (SEE ANNEX: unspecified)
- Regex: /ARTICLE:\s*$/gm (ARTICLE: no number)
- General pattern: /[A-Z]+:\s*$/gm (any tag followed by a colon and empty)

TAGS_SAP_SIN_REEMPLAZAR:
- Regex: /\([^)]*Description[^)]*\)/g (descriptions in parentheses without replacement)
- Regex: /\(Clau - Expedient[^)]*\)/g (uncompleted file clauses)
- Regex: /\[ZERM_[A-Z_-]+\]/g (ZERM tags without replacement)
- Regex: /\(Header:[^)]*\)/g (headers with logos not inserted)
- Regex: /\(Execution terms[^)]*\)/g (execution terms not specified)
- Regex: /\(Budget item\)/g (budget items not completed)
- Regex: /\(If no guarantee[^)]*\)/g (guarantee conditions not decided)
- Regex: /\(Guarantee percentage[^)]*\)/g (guarantee percentages not specified)
- Regex: /\(Guarantee terms\)/g (unfilled guarantee terms)
- Regex: /\([A-Z][^)]*\)/g (any descriptive text in parentheses)
- Regex: /\[[A-Z_-]+\]/g (any tag in square brackets without replacement)

INCORRECT_DATES:
- Regex: /\d{2}\/\d{2}\/\d{4}/g (validate ranges)
- Detect: days > 31, months > 12, years < 2020 or > 2030
- Incorrect formats: DD-MM-YYYY, YYYY/MM/DD

UNFORMATTED_AMOUNTS:
- Regex: /\d{4,}(?!\.\d{2})/g (long unformatted numbers)
- Detect absence of: thousand separators, € symbol
- Incorrect patterns: 123456, 123.456.78

MALFORMED_FILE_CODES:
- Regex: /CT\d{1,6}(?!\d)/g (less than 7 digits)
- Detect: CT123, CT12345 (incomplete)
- Correct format: CT1234567

DUPLICATED_SECTIONS:
- Detect repeated titles
- Duplicate numbering (1.1, 1.1)
- Identical content in multiple sections

INCORRECT_CROSS_REFERENCES:
- References to non-existent sections
- Incorrect page numbers
- Broken links to annexes

INTEGRATION WITH VALIDATION SYSTEM:
======================================

The system will automatically load these examples to:
1. Improve pattern detection
2. Generate more specific alerts
3. Suggest accurate corrections
4. Create more detailed reports

CONTINUOUS UPDATES:
======================

- Add new examples as errors are found
- Refine detection patterns
- Update validation prompts
- Document extreme cases and exceptions